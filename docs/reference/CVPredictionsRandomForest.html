<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create random forest cross-validated model — CVPredictionsRandomForest • machinelearnr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create random forest cross-validated model — CVPredictionsRandomForest" />
<meta property="og:description" content="For a single input dataset, the dataset is divided
sequentially into number.of.folds specified subsets. Each subset is left out as
testing data while the remaining subsets are used to train a random forest model
with default mtry and ntree. The left out data is then predicted by
the model." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">machinelearnr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Examples.html">Examples</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create random forest cross-validated model</h1>
    
    <div class="hidden name"><code>CVPredictionsRandomForest.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For a single input dataset, the dataset is divided
sequentially into number.of.folds specified subsets. Each subset is left out as
testing data while the remaining subsets are used to train a random forest model
with default mtry and ntree. The left out data is then predicted by
the model.</p>
    </div>

    <pre class="usage"><span class='fu'>CVPredictionsRandomForest</span><span class='op'>(</span>
  <span class='va'>inputted.data</span>,
  <span class='va'>name.of.predictors.to.use</span>,
  <span class='va'>target.column.name</span>,
  <span class='va'>seed</span>,
  percentile.threshold.to.keep <span class='op'>=</span> <span class='fl'>0.8</span>,
  <span class='va'>number.of.folds</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>inputted.data</th>
      <td><p>A dataframe that should already have the rows randomly shuffled.</p></td>
    </tr>
    <tr>
      <th>name.of.predictors.to.use</th>
      <td><p>A vector of strings that specify the name of columns to use as predictors. Each column should be numerical.</p></td>
    </tr>
    <tr>
      <th>target.column.name</th>
      <td><p>A string that specifies the column with values that we want to predict for. This column should be a factor.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>A integer that specifies the seed to use for random number generation.</p></td>
    </tr>
    <tr>
      <th>percentile.threshold.to.keep</th>
      <td><p>A number from 0-1 indicating the percentile to use for feature selection. The percentage of CV rounds that the feature has importance values above the percentile.threshold.to.keep will be counted in the var.tally of the output. Example: If there are 4 features (x, y, a, b) and the mean decrease in gini index in one LOOCV round are 4, 3, 2, 1 respectively, then this means feature x is in the 100th percentile (percentile value of 1), y is in the 75th percentile (percentile value of 0.75), etc. If the threshold is set at 0.75, then both x and y will be tallied for this single CV round.</p></td>
    </tr>
    <tr>
      <th>number.of.folds</th>
      <td><p>An integer from 1 to nrow(inputted.data) to specify the fold for CV. If This number is set to nrow(inputted.data), then the function will be LOOCV.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with two objects:
running.pred: predicted values for each observation. A vector.
var.tally: the percentage of CV rounds that the features had importance values above the percentile.threshold.to.keep percentile. A table.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function assumes that the data is already randomly shuffled. This
function is based off of the LOOCVPredictionsRandomForestAutomaticMtryAndNtree()
function, but this function does not have the ability to do PCA or
optimize for mtry and ntree. If the target classes are imbalanced, then
stratified cross-validation should be used. Stratification is not automatically
performed by this function. For stratification to occur, samples will need
to be shuffled so that each fold has proportional representation from each
class before inputting into this function.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Classification functions: 
<code><a href='CVRandomForestClassificationMatrixForPheatmap.html'>CVRandomForestClassificationMatrixForPheatmap</a>()</code>,
<code><a href='GenerateExampleDataMachinelearnr.html'>GenerateExampleDataMachinelearnr</a>()</code>,
<code><a href='LOOCVPredictionsRandomForestAutomaticMtryAndNtree.html'>LOOCVPredictionsRandomForestAutomaticMtryAndNtree</a>()</code>,
<code><a href='LOOCVRandomForestClassificationMatrixForPheatmap.html'>LOOCVRandomForestClassificationMatrixForPheatmap</a>()</code>,
<code><a href='RandomForestAutomaticMtryAndNtree.html'>RandomForestAutomaticMtryAndNtree</a>()</code>,
<code><a href='RandomForestClassificationGiniMatrixForPheatmap.html'>RandomForestClassificationGiniMatrixForPheatmap</a>()</code>,
<code><a href='RandomForestClassificationPercentileMatrixForPheatmap.html'>RandomForestClassificationPercentileMatrixForPheatmap</a>()</code>,
<code><a href='eval.classification.results.html'>eval.classification.results</a>()</code>,
<code><a href='find.best.number.of.trees.html'>find.best.number.of.trees</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>example.data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='GenerateExampleDataMachinelearnr.html'>GenerateExampleDataMachinelearnr</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>example.data.shuffled</span> <span class='op'>&lt;-</span> <span class='va'>example.data</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>example.data</span><span class='op'>)</span><span class='op'>)</span>,<span class='op'>]</span>

<span class='va'>result.CV</span> <span class='op'>&lt;-</span> <span class='fu'>CVPredictionsRandomForest</span><span class='op'>(</span>inputted.data <span class='op'>=</span> <span class='va'>example.data.shuffled</span>,
name.of.predictors.to.use <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"x"</span>, <span class='st'>"y"</span>, <span class='st'>"a"</span>, <span class='st'>"b"</span><span class='op'>)</span>,
target.column.name <span class='op'>=</span> <span class='st'>"actual"</span>,
seed <span class='op'>=</span> <span class='fl'>2</span>,
percentile.threshold.to.keep <span class='op'>=</span> <span class='fl'>0.5</span>,
number.of.folds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>example.data</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 1
#&gt; [1] 2
#&gt; [1] 3
#&gt; [1] 4
#&gt; [1] 5
#&gt; [1] 6
#&gt; [1] 7
#&gt; [1] 8
#&gt; [1] 9
#&gt; [1] 10
#&gt; [1] 11
#&gt; [1] 12
#&gt; [1] 13
#&gt; [1] 14
#&gt; [1] 15
#&gt; [1] 16
#&gt; [1] 17
#&gt; [1] 18
#&gt; [1] 19
#&gt; [1] 20
#&gt; [1] 21
#&gt; [1] 22
#&gt; [1] 23
#&gt; [1] 24
#&gt; [1] 25
#&gt; [1] 26
#&gt; [1] 27
#&gt; [1] 28
#&gt; [1] 29
#&gt; [1] 30
#&gt; [1] 31
#&gt; [1] 32
#&gt; [1] 33
#&gt; [1] 34
#&gt; [1] 35
#&gt; [1] 36</div><div class='input'>
<span class='co'>#Predicted</span>
<span class='va'>result.CV</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
</div><div class='output co'>#&gt;  [1] "1" "1" "5" "4" "3" "3" "3" "4" "3" "5" "3" "4" "2" "3" "5" "4" "1" "2" "3"
#&gt; [20] "1" "4" "3" "5" "3" "2" "1" "5" "5" "5" "3" "4" "2" "1" "5" "2" "1"</div><div class='input'>
<span class='co'>#Feature importance</span>
<span class='va'>result.CV</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>
</div><div class='output co'>#&gt; variables.with.sig.contributions
#&gt;      x      y      a 
#&gt; 100.00  97.22   2.78 </div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Yong-Han Hank Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


